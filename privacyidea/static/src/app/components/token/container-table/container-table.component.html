<div aria-label="Container Table" class="container-table">
  <div class="filter-paginator-container">
    <mat-form-field>
      <mat-label>Filter</mat-label>
      <input #input (keyup)="applyFilter($event)" aria-label="Filter Input" class="filter-input" matInput
             placeholder="">
    </mat-form-field>
    <span>Total items: {{ length }}</span>
    <mat-paginator (page)="handlePageEvent($event)" [hidePageSize]="hidePageSize" [length]="length"
                   [pageIndex]="pageIndex" [pageSizeOptions]="showPageSizeOptions ? pageSizeOptions : []"
                   [pageSize]="pageSize" aria-label="Select page of container" showFirstLastButtons>
    </mat-paginator>
  </div>
  <table (matSortChange)="sortData($event)" [dataSource]="dataSource()" aria-label="Token Data Table"
         class="mat-elevation-z8"
         mat-table matSort>
    @for (column of columnDefinitions; track column) {
      <ng-container [matColumnDef]="column.key">
        <th *matHeaderCellDef attr.aria-label="{{ column.label }} Header" mat-header-cell
            mat-sort-header> {{ column.label }}
        </th>
        <td *matCellDef="let element" attr.aria-label="{{ column.label }} Cell" mat-cell>
          @if (column.key === 'serial' || column.key === 'users' || column.key === 'realms'
          || column.key === 'user_realm') {
            <ng-container>
              <a attr.aria-label="{{ column.label }} Link" href="#">
                {{ element[column.key] }}
              </a>
            </ng-container>
          } @else {
            <ng-container>
              {{ element[column.key] }}
            </ng-container>
          }
        </td>
      </ng-container>
    }
    <tr *matHeaderRowDef="displayedColumns" aria-label="Header Row" mat-header-row></tr>
    <tr *matRowDef="let row; columns: displayedColumns;" aria-label="Data Row" mat-row></tr>
    <tr *matNoDataRow aria-label="No Data Row" class="mat-row">
      <td aria-label="No Data Cell" class="mat-cell" colspan="4">No data matching the filter "{{ input.value }}"
      </td>
    </tr>
  </table>
</div>
