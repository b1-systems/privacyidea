<div aria-label="Token Table Container" class="token-table-container">
  <div aria-label="Token Table" class="token-table">
    <mat-form-field>
      <mat-label>Filter</mat-label>
      <input #input (keyup)="applyFilter($event)" aria-label="Filter Input" class="filter-input" matInput
             placeholder="">
    </mat-form-field>
    <table (matSortChange)="sortData($event)" [dataSource]="dataSource()" aria-label="Token Data Table"
           class="mat-elevation-z8"
           mat-table matSort>
      <ng-container *ngFor="let column of columnDefinitions" [matColumnDef]="column.key">
        <th *matHeaderCellDef attr.aria-label="{{ column.label }} Header" mat-header-cell mat-sort-header>
          {{ column.label }}
        </th>
        <td *matCellDef="let element" attr.aria-label="{{ column.label }} Cell" mat-cell>
          <ng-container *ngIf="column.key === 'serial' || column.key === 'username'|| column.key === 'container_serial'
          || column.key === 'user_realm' || column.key === 'token_realm'; else otherColumns">
            <a attr.aria-label="{{ column.label }} Link" href="#">
              {{ element[column.key] }}
            </a>
          </ng-container>
          <ng-template #otherColumns>
            <span [ngClass]="{
              'highlight-base highlight-true': (column.key === 'active' && element[column.key] === true) ||
              (column.key === 'failcount' && element[column.key] >= 0 && element[column.key] <= 9),
              'highlight-base highlight-false': (column.key === 'active' && element[column.key] !== true) ||
              (column.key === 'failcount' && (element[column.key] < 0 || element[column.key] > 9))
            }">
              {{ element[column.key] }}
            </span>
          </ng-template>
        </td>
      </ng-container>
      <tr *matHeaderRowDef="displayedColumns" aria-label="Header Row" mat-header-row></tr>
      <tr *matRowDef="let row; columns: displayedColumns;" aria-label="Data Row" mat-row></tr>
      <tr *matNoDataRow aria-label="No Data Row" class="mat-row">
        <td aria-label="No Data Cell" class="mat-cell" colspan="4">No data matching the filter "{{ input.value }}"
        </td>
      </tr>
    </table>
    <mat-paginator [pageSizeOptions]="[10]" aria-label="Select page of tokens" showFirstLastButtons>
    </mat-paginator>
  </div>
</div>
